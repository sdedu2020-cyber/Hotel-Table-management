// --- Wix Restaurant POS Application Bundle ---
(function() {
  'use strict';

  const e = React.createElement;

  // --- types.js ---
  const TableStatus = {
    Vacant: 'Vacant',
    Occupied: 'Occupied',
    NeedsBill: 'Needs Bill',
  };

  // --- constants.js ---
  const MENU_ITEMS = [
    { id: 1, name: 'Bruschetta', price: 8.50, category: 'Appetizer', description: 'Grilled bread with tomatoes, garlic, basil.' },
    { id: 2, name: 'Calamari Fritti', price: 12.00, category: 'Appetizer', description: 'Crispy fried squid with marinara sauce.' },
    { id: 3, name: 'Caprese Salad', price: 9.75, category: 'Appetizer', description: 'Fresh mozzarella, tomatoes, and basil.' },
    { id: 4, name: 'Spaghetti Carbonara', price: 16.00, category: 'Main Course', description: 'Pasta with eggs, cheese, pancetta.' },
    { id: 5, name: 'Margherita Pizza', price: 14.50, category: 'Main Course', description: 'Classic pizza with tomatoes, mozzarella, basil.' },
    { id: 6, name: 'Chicken Parmesan', price: 18.00, category: 'Main Course', description: 'Breaded chicken with marinara and cheese.' },
    { id: 7, name: 'Grilled Salmon', price: 22.50, category: 'Main Course', description: 'Salmon with a lemon-dill sauce.' },
    { id: 8, name: 'Vegetable Lasagna', price: 15.50, category: 'Main Course', description: 'Layered pasta with fresh vegetables and cheese.'},
    { id: 9, name: 'Tiramisu', price: 7.50, category: 'Dessert', description: 'Coffee-flavored Italian dessert.' },
    { id: 10, name: 'Cannoli', price: 6.00, category: 'Dessert', description: 'Pastry shell with sweet, creamy filling.' },
    { id: 11, name: 'Panna Cotta', price: 7.00, category: 'Dessert', description: 'Italian custard with a berry coulis.'},
    { id: 12, name: 'House Red Wine', price: 8.00, category: 'Drink', description: 'A glass of our finest red.' },
    { id: 13, name: 'Sparkling Water', price: 3.50, category: 'Drink', description: '500ml bottle.' },
    { id: 14, name: 'Espresso', price: 3.00, category: 'Drink', description: 'Strong Italian coffee.' },
  ];
  const INITIAL_TABLES = Array.from({ length: 12 }, (_, i) => ({
    id: i + 1,
    status: TableStatus.Vacant,
    order: [],
  }));

  // --- components/icons.js ---
  const PlusIcon = ({ className }) => e("svg", { xmlns: "http://www.w3.org/2000/svg", className: className || "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" }, e("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 4v16m8-8H4" }));
  const MinusIcon = ({ className }) => e("svg", { xmlns: "http://www.w3.org/2000/svg", className: className || "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" }, e("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M20 12H4" }));
  const TrashIcon = ({ className }) => e("svg", { xmlns: "http://www.w3.org/2000/svg", className: className || "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" }, e("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" }));
  const XIcon = ({ className }) => e("svg", { xmlns: "http://www.w3.org/2000/svg", className: className || "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" }, e("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M6 18L18 6M6 6l12 12" }));
  const PrinterIcon = ({ className }) => e("svg", { xmlns: "http://www.w3.org/2000/svg", className: className || "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" }, e("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H7a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm2-9V5a2 2 0 012-2h2a2 2 0 012 2v3m-4 6h.01" }));
  const ClipboardListIcon = ({ className }) => e("svg", { xmlns: "http://www.w3.org/2000/svg", className: className || "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2 }, e("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" }));
  
  // --- components/TableCard.js ---
  const TableCard = ({ table, onSelect }) => {
    const statusColors = { [TableStatus.Vacant]: 'border-green-500 bg-green-500/10 hover:bg-green-500/20', [TableStatus.Occupied]: 'border-yellow-500 bg-yellow-500/10 hover:bg-yellow-500/20', [TableStatus.NeedsBill]: 'border-blue-500 bg-blue-500/10 hover:bg-blue-500/20' };
    const total = table.order.reduce((sum, item) => sum + item.price * item.quantity, 0);
    return e("div", { onClick: () => onSelect(table), className: `p-4 rounded-lg border-2 flex flex-col justify-between cursor-pointer transition-all duration-300 ${statusColors[table.status]}` }, e("div", { className: "flex justify-between items-center" }, e("h3", { className: "text-xl font-bold text-white" }, "Table ", table.id), e("span", { className: `px-3 py-1 text-sm font-semibold rounded-full ${statusColors[table.status].replace('border-', 'bg-').replace('/10', '')} text-gray-900` }, table.status)), e("div", { className: "mt-4 text-center" }, e("p", { className: "text-base text-gray-400" }, "Order Total"), e("p", { className: "text-3xl font-mono font-bold text-white" }, `₹${total.toFixed(2)}`)));
  };

  // --- components/TableLayout.js ---
  const TableLayout = ({ tables, onSelectTable }) => {
    return e("div", null, e("h1", { className: "text-3xl font-bold text-gray-100 mb-6" }, "Table Overview"), e("div", { className: "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4" }, tables.map(table => e(TableCard, { key: table.id, table: table, onSelect: onSelectTable }))));
  };

  // --- components/OrderModal.js ---
  const OrderModal = ({ table, onClose, onUpdateOrder, onUpdateStatus, onRequestBill, onMarkAsPaid }) => {
    const removeItem = (itemId) => { const newOrder = table.order.filter(item => item.id !== itemId); onUpdateOrder(table.id, newOrder); if (newOrder.length === 0) { onUpdateStatus(table.id, TableStatus.Vacant); } };
    const total = table.order.reduce((sum, item) => sum + item.price * item.quantity, 0);
    return e("div", { className: "fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-4" }, e("div", { className: "bg-gray-800 rounded-lg shadow-xl w-full max-w-xl max-h-[90vh] flex flex-col overflow-hidden" }, e("header", { className: "p-4 border-b border-gray-700 flex justify-between items-center" }, e("h2", { className: "text-2xl font-bold" }, "Table ", table.id, " - Order"), e("button", { onClick: onClose, className: "p-2 rounded-full hover:bg-gray-700 transition-colors" }, e(XIcon, { className: "w-6 h-6" }))), e("div", { className: "flex-grow flex flex-col overflow-auto p-4" }, e("div", { className: "flex-grow" }, table.order.length === 0 ? e("p", { className: "text-gray-400 text-center mt-8" }, "No items in order.") : e("ul", { className: "space-y-3" }, table.order.map(item => e("li", { key: item.id, className: "flex items-center bg-gray-900 p-3 rounded-md" }, e("div", { className: "flex-grow" }, e("p", { className: "font-semibold" }, item.name), e("p", { className: "text-sm text-gray-400" }, `₹${item.price.toFixed(2)}`)), e("div", { className: "flex items-center gap-3" }, e("span", { className: "font-mono text-center" }, "x ", item.quantity), e("p", { className: "w-20 text-right font-semibold" }, `₹${(item.price * item.quantity).toFixed(2)}`), e("button", { onClick: () => removeItem(item.id), className: "p-2 rounded-full hover:bg-red-500/20 text-red-400", "aria-label": `Remove ${item.name}` }, e(TrashIcon, { className: "w-5 h-5" }))))))), e("div", { className: "mt-auto pt-4 border-t border-gray-700" }, e("div", { className: "flex justify-between items-center text-2xl font-bold mb-4" }, e("span", null, "Total:"), e("span", null, `₹${total.toFixed(2)}`)), e("div", { className: "grid grid-cols-2 gap-2" }, e("button", { onClick: () => onRequestBill(table), className: "w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md transition-colors" }, "Request Bill"), e("button", { onClick: () => onMarkAsPaid(table.id), className: "w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-md transition-colors" }, "Mark as Paid"))))));
  };
  
  // --- components/BillModal.js ---
  const BillModal = ({ table, onClose, onMarkAsPaid }) => {
    const handlePrint = () => window.print();
    const subtotal = table.order.reduce((sum, item) => sum + item.price * item.quantity, 0);
    const cgst = subtotal * 0.025, sgst = subtotal * 0.025, total = subtotal + cgst + sgst;
    const now = new Date();
    const formatCurrency = (amount) => `₹${amount.toFixed(2)}`;
    return e("div", { className: "fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-4" }, e("div", { className: "relative bg-gray-800 rounded-lg shadow-xl w-full max-w-md flex flex-col" }, e("div", { id: "printable-area", className: "p-6 bg-white text-black font-mono text-xs w-[302px] mx-auto my-6 printable-content" }, e("div", { className: "text-center" }, e("h2", { className: "text-lg font-bold" }, "Wix Restaurant"), e("p", { className: "text-[10px]" }, "123 Gastronomy Lane, Foodie City"), e("p", { className: "text-[10px]" }, "Phone: (123) 456-7890"), e("hr", { className: "border-t border-dashed border-black my-2" })), e("div", { className: "flex justify-between text-[10px]" }, e("span", null, "Bill No: ", (Math.random() * 100000).toFixed(0)), e("span", null, "Table: ", table.id)), e("div", { className: "flex justify-between text-[10px]" }, e("span", null, "Date: ", now.toLocaleDateString('en-IN')), e("span", null, "Time: ", now.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' }))), e("hr", { className: "border-t border-dashed border-black my-2" }), e("table", { className: "w-full text-[11px]" }, e("thead", null, e("tr", { className: 'border-b border-dashed border-black' }, e("th", { className: "text-left font-semibold pb-1" }, "Item"), e("th", { className: "text-center font-semibold pb-1" }, "Qty"), e("th", { className: "text-right font-semibold pb-1" }, "Price"), e("th", { className: "text-right font-semibold pb-1" }, "Total"))), e("tbody", null, table.order.map(item => e("tr", { key: item.id }, e("td", { className: "text-left pr-1 py-1" }, item.name), e("td", { className: "text-center py-1" }, item.quantity), e("td", { className: "text-right py-1" }, item.price.toFixed(2)), e("td", { className: "text-right py-1" }, (item.quantity * item.price).toFixed(2)))))), e("hr", { className: "border-t border-dashed border-black my-2" }), e("div", { className: "space-y-1 text-xs" }, e("div", { className: "flex justify-between" }, e("span", null, "Subtotal:"), e("span", null, subtotal.toFixed(2))), e("div", { className: "flex justify-between" }, e("span", null, "CGST @2.5%:"), e("span", null, cgst.toFixed(2))), e("div", { className: "flex justify-between" }, e("span", null, "SGST @2.5%:"), e("span", null, sgst.toFixed(2)))), e("hr", { className: "border-t border-dashed border-black my-2" }), e("div", { className: "flex justify-between font-bold text-sm" }, e("span", null, "TOTAL:"), e("span", null, formatCurrency(total))), e("hr", { className: "border-t border-dashed border-black my-2" }), e("p", { className: "text-center mt-4 text-[10px]" }, "Thank you for your visit!")), e("div", { className: "p-4 bg-gray-700 rounded-b-lg grid grid-cols-2 gap-4" }, e("button", { onClick: handlePrint, className: "flex items-center justify-center gap-2 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md transition-colors" }, e(PrinterIcon, { className: "w-5 h-5" }), "Print Bill"), e("button", { onClick: () => onMarkAsPaid(table.id), className: "w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-md transition-colors" }, "Mark as Paid")), e("button", { onClick: onClose, className: "absolute top-2 right-2 p-2 rounded-full hover:bg-gray-600 transition-colors" }, e(XIcon, { className: "w-6 h-6 text-white" }))));
  };
  
  // --- components/NewOrderModal.js ---
  const NewOrderModal = ({ tables, menu, onClose, onCreateOrder }) => {
    const [selectedTableId, setSelectedTableId] = React.useState(tables.length > 0 ? tables[0].id : null);
    const [order, setOrder] = React.useState([]);
    const categories = ['Appetizer', 'Main Course', 'Dessert', 'Drink'];
    const [selectedCategory, setSelectedCategory] = React.useState(null);
    const [isSidebarVisible, setIsSidebarVisible] = React.useState(true);
    const addItem = (itemToAdd) => { const existingItem = order.find(item => item.id === itemToAdd.id); let newOrder; if (existingItem) { newOrder = order.map(item => item.id === itemToAdd.id ? { ...item, quantity: item.quantity + 1 } : item); } else { newOrder = [...order, { ...itemToAdd, quantity: 1 }]; } setOrder(newOrder); };
    const removeItem = (itemId) => setOrder(order.filter(item => item.id !== itemId));
    const updateQuantity = (itemId, delta) => setOrder(order.map(item => item.id === itemId ? { ...item, quantity: Math.max(0, item.quantity + delta) } : item).filter(item => item.quantity > 0));
    const handleCreateOrder = () => { if (selectedTableId && order.length > 0) { onCreateOrder(selectedTableId, order); } };
    const handleCategorySelect = (category) => { setSelectedCategory(category); setIsSidebarVisible(false); };
    const handleShowCategories = () => { setIsSidebarVisible(true); setSelectedCategory(null); };
    const total = order.reduce((sum, item) => sum + item.price * item.quantity, 0);
    return e("div", { className: "fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-4" }, e("div", { className: "bg-gray-800 rounded-lg shadow-xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden" }, e("header", { className: "p-4 border-b border-gray-700 flex justify-between items-center" }, e("h2", { className: "text-2xl font-bold" }, "New Order"), e("button", { onClick: onClose, className: "p-2 rounded-full hover:bg-gray-700 transition-colors" }, e(XIcon, { className: "w-6 h-6" }))), e("div", { className: "flex-grow flex flex-col md:flex-row overflow-hidden" }, e("div", { className: "w-full md:w-2/5 flex flex-col p-4 border-r border-gray-700" }, e("div", { className: "mb-4" }, e("label", { htmlFor: "table-select", className: "block text-sm font-medium text-gray-300 mb-1" }, "Select Table"), e("select", { id: "table-select", value: selectedTableId ?? '', onChange: (e) => setSelectedTableId(Number(e.target.value)), disabled: tables.length === 0, className: "w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:outline-none disabled:bg-gray-800 disabled:cursor-not-allowed" }, tables.length > 0 ? tables.map(t => e("option", { key: t.id, value: t.id }, `Table ${t.id}`)) : e("option", null, "No vacant tables"))), e("h3", { className: "text-xl font-semibold mb-2" }, "Order Items"), e("div", { className: "flex-grow overflow-y-auto pr-2" }, order.length === 0 ? e("div", { className: "flex flex-col items-center justify-center h-full text-gray-500" }, e("p", null, "No items added yet."), e("p", { className: "text-sm" }, "Select items from the menu.")) : e("ul", { className: "space-y-3" }, order.map(item => e("li", { key: item.id, className: "flex items-center bg-gray-900 p-3 rounded-md" }, e("div", { className: "flex-grow" }, e("p", { className: "font-semibold" }, item.name), e("p", { className: "text-sm text-gray-400" }, `₹${item.price.toFixed(2)}`)), e("div", { className: "flex items-center gap-2" }, e("button", { onClick: () => updateQuantity(item.id, -1), className: "p-1 rounded-full hover:bg-gray-700" }, e(MinusIcon, { className: "w-4 h-4" })), e("span", { className: "font-mono w-6 text-center" }, item.quantity), e("button", { onClick: () => updateQuantity(item.id, 1), className: "p-1 rounded-full hover:bg-gray-700" }, e(PlusIcon, { className: "w-4 h-4" })), e("button", { onClick: () => removeItem(item.id), className: "p-1 rounded-full hover:bg-red-500/20 text-red-400" }, e(TrashIcon, { className: "w-4 h-4" }))), e("p", { className: "w-20 text-right font-semibold" }, `₹${(item.price * item.quantity).toFixed(2)}`))))), e("div", { className: "mt-auto pt-4 border-t border-gray-700" }, e("div", { className: "flex justify-between items-center text-2xl font-bold mb-4" }, e("span", null, "Total:"), e("span", null, `₹${total.toFixed(2)}`)), e("button", { onClick: handleCreateOrder, disabled: !selectedTableId || order.length === 0, className: "w-full bg-green-600 hover:bg-green-700 disabled:bg-green-900 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-md transition-colors" }, "Create Order"))), e("div", { className: "w-full md:w-3/5 flex flex-col p-4" }, e("div", { className: "flex justify-between items-center mb-4" }, e("h3", { className: "text-xl font-semibold" }, "Menu"), !isSidebarVisible && e("button", { onClick: handleShowCategories, className: "bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-3 rounded-md transition-colors flex items-center gap-2", "aria-label": "Show menu categories" }, e(ClipboardListIcon, { className: "w-5 h-5" }), e("span", null, "Categories"))), e("div", { className: "flex-grow flex gap-4 overflow-hidden" }, isSidebarVisible && e("nav", { className: "w-48 flex-shrink-0 bg-gray-900/50 rounded-lg p-2 overflow-y-auto" }, e("ul", { className: "space-y-1" }, categories.map(category => e("li", { key: category }, e("button", { onClick: () => handleCategorySelect(category), className: `w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${selectedCategory === category ? 'bg-purple-600 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}` }, `${category}s`))))), e("div", { className: "flex-grow overflow-y-auto pr-2" }, !selectedCategory ? e("div", { className: "flex flex-col items-center justify-center h-full text-gray-500" }, e(ClipboardListIcon, { className: "w-16 h-16 mb-4" }), e("h3", { className: "text-lg font-semibold" }, "Select a category"), e("p", { className: "text-sm" }, "Choose a category to see menu items.")) : e("div", { className: `grid gap-3 ${isSidebarVisible ? 'grid-cols-1 xl:grid-cols-2' : 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3'}`}, menu.filter(item => item.category === selectedCategory).map(item => e("div", { key: item.id, onClick: () => addItem(item), className: "bg-gray-700/50 p-3 rounded-md hover:bg-gray-700 cursor-pointer transition-colors flex flex-col h-full" }, e("div", { className: "flex-grow" }, e("div", { className: "flex justify-between items-start" }, e("h4", { className: "font-semibold text-white pr-2" }, item.name), e("p", { className: "font-semibold text-white whitespace-nowrap" }, `₹${item.price.toFixed(2)}`)), e("p", { className: "text-sm text-gray-400 mt-1" }, item.description)), e("div", { className: "flex justify-end mt-2" }, e("button", { "aria-label": `Add ${item.name} to order`, className: "text-purple-400" }, e(PlusIcon, { className: "w-5 h-5" }))))))))))));
  };
  
  // --- components/AddMenuItemModal.js ---
  const AddMenuItemModal = ({ onClose, onAddItem }) => {
    const [name, setName] = React.useState('');
    const [price, setPrice] = React.useState('');
    const [category, setCategory] = React.useState('Appetizer');
    const [description, setDescription] = React.useState('');
    const [errors, setErrors] = React.useState({ name: '', price: '' });
    const validate = () => { const newErrors = { name: '', price: '' }; let isValid = true; if (!name.trim()) { newErrors.name = 'Item name is required.'; isValid = false; } const priceNum = parseFloat(price); if (isNaN(priceNum) || priceNum <= 0) { newErrors.price = 'Please enter a valid positive price.'; isValid = false; } setErrors(newErrors); return isValid; };
    const handleSubmit = (ev) => { ev.preventDefault(); if (validate()) { onAddItem({ name, price: parseFloat(price), category, description }); onClose(); } };
    return e("div", { className: "fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-4" }, e("div", { className: "bg-gray-800 rounded-lg shadow-xl w-full max-w-md flex flex-col overflow-hidden" }, e("header", { className: "p-4 border-b border-gray-700 flex justify-between items-center" }, e("h2", { className: "text-2xl font-bold" }, "Add New Menu Item"), e("button", { onClick: onClose, className: "p-2 rounded-full hover:bg-gray-700 transition-colors" }, e(XIcon, { className: "w-6 h-6" }))), e("form", { onSubmit: handleSubmit, noValidate: true }, e("div", { className: "p-6 space-y-4" }, e("div", null, e("label", { htmlFor: "item-name", className: "block text-sm font-medium text-gray-300 mb-1" }, "Item Name"), e("input", { type: "text", id: "item-name", value: name, onChange: (e) => setName(e.target.value), className: "w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:outline-none", required: true, "aria-invalid": !!errors.name, "aria-describedby": "item-name-error" }), errors.name && e("p", { id: "item-name-error", className: "text-red-400 text-xs mt-1" }, errors.name)), e("div", null, e("label", { htmlFor: "item-price", className: "block text-sm font-medium text-gray-300 mb-1" }, "Price (Rate)"), e("input", { type: "number", id: "item-price", value: price, onChange: (e) => setPrice(e.target.value), className: "w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:outline-none", required: true, min: "0.01", step: "0.01", "aria-invalid": !!errors.price, "aria-describedby": "item-price-error" }), errors.price && e("p", { id: "item-price-error", className: "text-red-400 text-xs mt-1" }, errors.price)), e("div", null, e("label", { htmlFor: "item-category", className: "block text-sm font-medium text-gray-300 mb-1" }, "Category"), e("select", { id: "item-category", value: category, onChange: (e) => setCategory(e.target.value), className: "w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:outline-none" }, e("option", { value: "Appetizer" }, "Appetizer"), e("option", { value: "Main Course" }, "Main Course"), e("option", { value: "Dessert" }, "Dessert"), e("option", { value: "Drink" }, "Drink"))), e("div", null, e("label", { htmlFor: "item-description", className: "block text-sm font-medium text-gray-300 mb-1" }, "Description"), e("textarea", { id: "item-description", rows: 3, value: description, onChange: (e) => setDescription(e.target.value), className: "w-full bg-gray-900 border border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:outline-none", placeholder: "Optional description of the item." }))), e("footer", { className: "p-4 bg-gray-700/50 flex justify-end gap-3" }, e("button", { type: "button", onClick: onClose, className: "bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-md transition-colors" }, "Cancel"), e("button", { type: "submit", className: "bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition-colors" }, "Add Item")))));
  };

  // --- App.js ---
  const App = () => {
    const { useState, useCallback, useEffect } = React;
    function useLocalStorageState(key, defaultValue) { const [state, setState] = useState(() => { try { const storedValue = window.localStorage.getItem(key); return storedValue ? JSON.parse(storedValue) : defaultValue; } catch (error) { console.error("Error reading localStorage:", error); return defaultValue; } }); useEffect(() => { try { window.localStorage.setItem(key, JSON.stringify(state)); } catch (error) { console.error("Error writing localStorage:", error); } }, [key, state]); return [state, setState]; }
    const [tables, setTables] = useLocalStorageState('restaurant-tables', INITIAL_TABLES);
    const [menuItems, setMenuItems] = useLocalStorageState('restaurant-menu', MENU_ITEMS);
    const [selectedTable, setSelectedTable] = useState(null);
    const [billingTable, setBillingTable] = useState(null);
    const [isNewOrderModalOpen, setIsNewOrderModalOpen] = useState(false);
    const [isAddItemModalOpen, setIsAddItemModalOpen] = useState(false);
    const handleSelectTable = useCallback((table) => { if (table.status === TableStatus.NeedsBill) { setBillingTable(table); } else { setSelectedTable(table); } }, []);
    const handleCloseModal = useCallback(() => setSelectedTable(null), []);
    const handleCloseBillModal = useCallback(() => setBillingTable(null), []);
    const handleUpdateOrder = useCallback((tableId, newOrder) => { setTables(prev => prev.map(t => t.id === tableId ? { ...t, order: newOrder } : t)); if (selectedTable && selectedTable.id === tableId) { setSelectedTable(prev => prev ? { ...prev, order: newOrder } : null); } }, [selectedTable]);
    const handleUpdateStatus = useCallback((tableId, newStatus) => { setTables(prev => prev.map(t => t.id === tableId ? { ...t, status: newStatus } : t)); if (selectedTable && selectedTable.id === tableId) { setSelectedTable(prev => prev ? { ...prev, status: newStatus } : null); } }, [selectedTable]);
    const handleRequestBill = useCallback((table) => { setTables(prev => prev.map(t => t.id === table.id ? { ...t, status: TableStatus.NeedsBill } : t)); setSelectedTable(null); setBillingTable({ ...table, status: TableStatus.NeedsBill }); }, []);
    const handleMarkAsPaid = useCallback((tableId) => { setTables(prev => prev.map(t => t.id === tableId ? { ...t, order: [], status: TableStatus.Vacant } : t)); if (selectedTable && selectedTable.id === tableId) setSelectedTable(null); if (billingTable && billingTable.id === tableId) setBillingTable(null); }, [selectedTable, billingTable]);
    const handleCreateOrder = useCallback((tableId, newOrder) => { if (newOrder.length > 0) { setTables(prev => prev.map(t => t.id === tableId ? { ...t, order: newOrder, status: TableStatus.Occupied } : t)); } setIsNewOrderModalOpen(false); }, []);
    const handleAddNewMenuItem = useCallback((item) => { setMenuItems(prev => { const newId = Math.max(0, ...prev.map(i => i.id)) + 1; return [...prev, { ...item, id: newId }]; }); }, []);
    
    return e("div", { className: "min-h-screen bg-gray-900 text-white font-sans" }, e("header", { className: "bg-gray-900/80 backdrop-blur-sm sticky top-0 z-10 p-4 border-b border-gray-700" }, e("div", { className: "flex justify-between items-center container mx-auto" }, e("h1", { className: "text-2xl font-bold text-purple-400" }, "Wix Restaurant POS"), e("div", { className: "flex items-center gap-4" }, e("button", { onClick: () => setIsAddItemModalOpen(true), className: "bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition-colors flex items-center gap-2", "aria-label": "Add new menu item" }, e(ClipboardListIcon, { className: "w-5 h-5" }), e("span", { className: "hidden sm:inline" }, "Add Item")), e("button", { onClick: () => setIsNewOrderModalOpen(true), className: "bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md transition-colors flex items-center gap-2", "aria-label": "Create new order" }, e(PlusIcon, { className: "w-5 h-5" }), e("span", { className: "hidden sm:inline" }, "New Order"))))), e("main", { className: "container mx-auto" }, e("div", { className: "p-4 sm:p-6 md:p-8" }, e(TableLayout, { tables, onSelectTable: handleSelectTable }))), selectedTable && e(OrderModal, { table: selectedTable, onClose: handleCloseModal, onUpdateOrder: handleUpdateOrder, onUpdateStatus: handleUpdateStatus, onRequestBill: handleRequestBill, onMarkAsPaid: handleMarkAsPaid }), billingTable && e(BillModal, { table: billingTable, onClose: handleCloseBillModal, onMarkAsPaid: handleMarkAsPaid }), isNewOrderModalOpen && e(NewOrderModal, { tables: tables.filter(t => t.status === TableStatus.Vacant), menu: menuItems, onClose: () => setIsNewOrderModalOpen(false), onCreateOrder: handleCreateOrder }), isAddItemModalOpen && e(AddMenuItemModal, { onClose: () => setIsAddItemModalOpen(false), onAddItem: handleAddNewMenuItem }));
  };

  // --- Mount Application ---
  const rootElement = document.getElementById('root');
  if (rootElement) {
    const root = ReactDOM.createRoot(rootElement);
    root.render(e(App));
  } else {
    console.error('Failed to find the root element');
  }

})();
